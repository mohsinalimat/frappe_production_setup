# ==============================================================================
# FRAPPE/ERPNEXT PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this file to .env and customize for your setup:
#   cp .env.example .env
#   nano .env
# ==============================================================================

# ------------------------------------------------------------------------------
# VERSION CONFIGURATION
# ------------------------------------------------------------------------------
# Frappe framework version (branch name)
FRAPPE_VERSION=version-15

# ERPNext version (tag or branch)
ERPNEXT_VERSION=v15.93.0

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------
# Database root password (CHANGE THIS!)
DB_PASSWORD=YourStrongPasswordHere123!

# Only if using external database (leave empty for built-in MariaDB)
DB_HOST=
DB_PORT=

# Only if you use docker secrets for DB password
DB_PASSWORD_SECRETS_FILE=

# ------------------------------------------------------------------------------
# REDIS CONFIGURATION
# ------------------------------------------------------------------------------
# Only if using external Redis (leave empty for built-in Redis)
REDIS_CACHE=
REDIS_QUEUE=

# ------------------------------------------------------------------------------
# SSL/TLS CONFIGURATION (Production with HTTPS)
# ------------------------------------------------------------------------------
# Your email for Let's Encrypt SSL certificate notifications
LETSENCRYPT_EMAIL=admin@example.com

# Site domains for SSL certificates (use backticks and comma-separated)
# Example: SITES=`erp.example.com`,`hrms.example.com`
SITES=`erp.example.com`

# ------------------------------------------------------------------------------
# CUSTOM IMAGE CONFIGURATION
# ------------------------------------------------------------------------------
# If you built a custom image, specify it here
# Leave empty to use default frappe/erpnext image
CUSTOM_IMAGE=

# Custom image tag (leave empty to use ERPNEXT_VERSION)
CUSTOM_TAG=

# Pull policy: always, missing, never
PULL_POLICY=always

# Restart policy: always, unless-stopped, on-failure, no
RESTART_POLICY=unless-stopped

# ------------------------------------------------------------------------------
# SITE CONFIGURATION
# ------------------------------------------------------------------------------
# Override site name resolution
# Default: $$host (resolves by HTTP host header)
# Set to specific site name if you want all traffic to go to one site
# Example: FRAPPE_SITE_NAME_HEADER=mysite.localhost
FRAPPE_SITE_NAME_HEADER=

# ------------------------------------------------------------------------------
# NETWORK CONFIGURATION
# ------------------------------------------------------------------------------
# Port to publish HTTP traffic (only used in development without proxy)
# Production with Traefik/Nginx proxy uses 80/443
HTTP_PUBLISH_PORT=8080

# Trusted upstream IP address (for proxy setups)
UPSTREAM_REAL_IP_ADDRESS=127.0.0.1

# Request header field for real IP
UPSTREAM_REAL_IP_HEADER=X-Forwarded-For

# Recursive search for real IP (on/off)
UPSTREAM_REAL_IP_RECURSIVE=off

# ------------------------------------------------------------------------------
# NGINX CONFIGURATION
# ------------------------------------------------------------------------------
# Proxy read timeout (useful for long-running operations)
# Examples: 120s, 5m, 1h
PROXY_READ_TIMEOUT=120s

# Maximum upload file size
# Examples: 50m, 100m, 500m
CLIENT_MAX_BODY_SIZE=50m

# ------------------------------------------------------------------------------
# ADVANCED OPTIONS (Usually don't need to change)
# ------------------------------------------------------------------------------
# Platform architecture
PLATFORM=linux/amd64

# Socketio port
SOCKETIO_PORT=9000

# Backend service port
BACKEND_PORT=8000

# ------------------------------------------------------------------------------
# BACKUP CONFIGURATION
# ------------------------------------------------------------------------------
# Backup retention in days
BACKUP_RETENTION_DAYS=30

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# ------------------------------------------------------------------------------
# DEVELOPMENT OPTIONS (Only for development setup)
# ------------------------------------------------------------------------------
# Set to 1 to enable development mode
DEVELOPER_MODE=0

# Mount local apps for development
FRAPPE_PATH_LOCAL=
ERPNEXT_PATH_LOCAL=

# ------------------------------------------------------------------------------
# NOTES:
# ------------------------------------------------------------------------------
# 1. Always use strong passwords for DB_PASSWORD
# 2. For production, set proper LETSENCRYPT_EMAIL and SITES
# 3. SITES format: `domain1.com`,`domain2.com` (backticks and comma-separated)
# 4. If using custom image, build it first with build-image.sh script
# 5. For external database/redis, provide host and port details
# ==============================================================================
